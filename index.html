<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Two-way data binding</title>
</head>
<body>
    <div>
        <label for="foo">foo</label>
        <input type="text" id="foo">
    </div>
    
    <div>
        <label for="bar">bar</label>
        <input type="text" id="bar">
    </div>
    
    <script src="src/two-way.js" type="text/javascript"></script>
    <script type="text/javascript">
        // Create a data object
        var user = {name: 'SÃ©rgio'};
        
        var foo = document.querySelector('#foo');
        var bar = document.querySelector('#bar');
        
        // Sets the initial value
        foo.value = bar.value = user.name;
        
        user.watch('name', function(prop, oldvalue, newvalue) {
            bar.value = newvalue; // Update the bar input
            return newvalue;
        });
        
        foo.onkeyup = function(e) {
            user.name = e.target.value;
        }
    </script>
</body>

</html>
